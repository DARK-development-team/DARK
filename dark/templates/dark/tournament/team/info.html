{% extends "dark/base.html" %}

{% block section_subtitle %}
    Team Details
{% endblock %}
{% block section_title %}
    {{ team.name }}
{% endblock %}

{% block content %}
    <b>Team:</b> {{ team.name }} <br>
    <b>Tournament:</b> {{ team.tournament.name }}
    <div class="row mx-sm-5 mb-3 border border-secondary"></div>
    <div class="row justify-content-center">
        <div class="col-2 text-center">
            {% if user.is_authenticated %}
                <button type="button" class="btn btn-secondary btn-md float-begin mb-4"
                        onclick="location.href ='{% url 'tournament:team:member:add' team.tournament.id team.id %}'">
                    Add Member
                </button>
            {% endif %}
        </div>
        {% if user_member.role.can_remove %}
            <div class="col-2 text-center">
                <button type="button" class="btn btn-primary"
                        onclick="location.href ='{% url 'tournament:team:role:all' team.tournament.id team.id %}'">
                    Show Roles
                </button>
            </div>
            <div class="col-2 text-center">
                <button type="button" class="btn btn-info"
                        onclick="location.href ='{% url 'tournament:team:change name' team.tournament.id team.id %}'">
                    Edit Team Name
                </button>
            </div>
            <div class="col-2 text-center">
                <button type="button" class="btn btn-danger"
                        onclick="location.href ='{% url 'tournament:team:remove' team.tournament.id team.id %}'">
                    Remove Team
                </button>
            </div>

        {% endif %}
    </div>

    <div class="row justify-content-around mx-sm-5 mb-sm-2 pb-2 font-weight-bold">
        <div class="col-1">#</div>
        <div class="col-4">Participant Name</div>
        <div class="col-4">Role</div>
        {% if user_member.role.can_modify_members %}
            <div class="col-3"></div>
        {% endif %}
    </div>
    <div class="row mx-sm-5 mb-sm-2 border border-secondary"></div>
    {% for m in members %}
        <div class="row justify-content-around swatch-200 mx-sm-5 my-sm-2 py-3 rounded shadow">
            <div class="col-1">{{ forloop.counter }}</div>
            <div class="col-4"><a class="text-info"
                                  href="{% url 'tournament:team:member:info' team.tournament.id team.id m.id %}">{{ m.user.username }} </a>
            </div>
            <div class="col-4">{{ m.role.name }}</div>
            {% if user_member.role.can_modify_members %}
                <div class="col-3">
                    {% if m.role.name != "Creator" %}
                        <button type="button" class="btn btn-primary btn-sm"
                                onclick="location.href ='{% url 'tournament:team:member:change_role' team.tournament.id team.id m.id %}'">
                            Change Role
                        </button>
                        <button type="button" class="btn btn-danger btn-sm"
                                onclick="location.href ='{% url 'tournament:team:member:remove' team.tournament.id team.id m.id %}'">
                            Remove
                        </button>
                    {% endif %}
                </div>
            {% endif %}
        </div>
    {% endfor %}

    <div class="row justify-content-around mx-sm-5 mb-sm-2 mt-sm-4 pb-2 font-weight-bold">
        <div class="col-1">#</div>
        <div class="col-2">Round</div>
        <div class="col-6">Bot</div>
        <div class="col-2">Action</div>
    </div>
    <div class="row mx-sm-5 mb-sm-2 border border-secondary"></div>
    {% for tround, bot in round_bot_pairs %}
        <div class="row justify-content-around swatch-200 mx-sm-5 my-sm-2 py-3 rounded shadow">
            <div class="col-1">{{ forloop.counter }}</div>
            <div class="col-2"><a class="text-info"
                                  href="{% url 'tournament:tround:info' team.tournament.id tround.id %}">{{ tround.name }}</a>
            </div>
            <div class="col-6">
                {% if bot is not None %}
                    {{ bot|stringformat:"s" }}
                {% else %}
                    ---
                {% endif %}
            </div>
            <div class="col-2">
                {% if bot is not None %}
                    <button type="button" class="btn btn-primary btn-sm"
                            onclick="location.href ='{% url 'tournament:team:bot:modify' team.tournament.id team.id bot.id %}'">
                        Modify
                    </button>
                    <button type="button" class="btn btn-primary btn-sm"
                            onclick="location.href ='{% url 'tournament:team:bot:remove' team.tournament.id team.id bot.id %}'">
                        Remove
                    </button>
                {% else %}
                    <button type="button" class="btn btn-primary btn-sm"
                            onclick="location.href ='{% url 'tournament:team:bot:add' team.tournament.id team.id tround.id %}'">
                        Add
                    </button>
                {% endif %}
            </div>
        </div>
    {% endfor %}

{% endblock %}